{{define "body"}}
    <script type="text/javascript">
    $(document).ready(function() {
        $("#addEquality").click(function(e) {
            e.preventDefault();

            equalities = [];

            $("#sortable li").each(function(key, condition) {
                console.dir(condition);
                console.dir($(condition));
                console.dir($(condition).attr("data-type"));
                console.dir(condition.attr("data-type"));
                if (condition.attr("data-type") == "equality") {
                    equalities.append({Field: condition.attr("data-field"), Operator: condition.attr("data-operator"), Value: condition.attr("data-value")})
                }
            });

            console.dir(equalities);
        });

        $("#sortable").sortable();
        $("#sortable").disableSelection();
    });
    </script>

    <table class="main-table">
        <tr>
            <td>
                <form id="addEquality" action="/save" method="post">
                    Field:
                    <select name="field">
                        <option value="age">Age</option>
                        <option value="pets"># Pets</option>
                    </select>
                    Operator:
                    <select name="operator">
                        <option value="eq">=</option>
                        <option value="ne">!=</option>
                        <option value="gt">></option>
                        <option value="lt"><</option>
                    </select>
                    Value: <input name="value"></input>
                    <input type="submit">
                </form>
            </td>
            <td>
                two
            </td>
        </tr>
        <tr>
            <td>
                <h4>Equality Conditions</h4>
                <form action="truncate_equality" method="post">
                    <input type="submit" value="Truncate">
                </form>
                <ul id="sortable">
                    {{range .Conditions}}
                        <li class="ui-state-default" {{.Other}}>{{.Text}} {{.Other}}</li>
                    {{end}}
                </ul>
            </td>
            <td>
                four
            </td>
        </tr>
    </table>
{{end}}